{"ast":null,"code":"import { API_URL } from \"./constants.js\";\nexport function login(user, pass) {\n  return function (dispatch) {\n    axios.post(\"\".concat(API_URL, \"/auth\"), {\n      user: user,\n      pass: pass\n    }).then(function (res) {\n      dispatch(loginSuccess(res.data, user));\n      var token = res.data.token;\n      axios.defaults.headers.common[\"Authorization\"] = token;\n      history.push(\"/\");\n    }).catch(function (err) {\n      if (err.response.status === 401) {\n        dispatch(loginFailure(err));\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/Users/tats/Documents/JOBS/Elecsis/tech-assessment/elecsis-assessment/src/services/login.js"],"names":["API_URL","login","user","pass","dispatch","axios","post","then","res","loginSuccess","data","token","defaults","headers","common","history","push","catch","err","response","status","loginFailure"],"mappings":"AAAA,SAASA,OAAT,QAAwB,gBAAxB;AAEA,OAAO,SAASC,KAAT,CAAeC,IAAf,EAAqBC,IAArB,EAA2B;AAChC,SAAO,UAAUC,QAAV,EAAoB;AACzBC,IAAAA,KAAK,CACFC,IADH,WACWN,OADX,YAC2B;AAAEE,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,IAAI,EAAJA;AAAR,KAD3B,EAEGI,IAFH,CAEQ,UAACC,GAAD,EAAS;AACbJ,MAAAA,QAAQ,CAACK,YAAY,CAACD,GAAG,CAACE,IAAL,EAAWR,IAAX,CAAb,CAAR;AACA,UAAMS,KAAK,GAAGH,GAAG,CAACE,IAAJ,CAASC,KAAvB;AACAN,MAAAA,KAAK,CAACO,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiDH,KAAjD;AACAI,MAAAA,OAAO,CAACC,IAAR,CAAa,GAAb;AACD,KAPH,EAQGC,KARH,CAQS,UAACC,GAAD,EAAS;AACd,UAAIA,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAC/BhB,QAAAA,QAAQ,CAACiB,YAAY,CAACH,GAAD,CAAb,CAAR;AACD;AACF,KAZH;AAaD,GAdD;AAeD","sourcesContent":["import { API_URL } from \"./constants.js\";\n\nexport function login(user, pass) {\n  return function (dispatch) {\n    axios\n      .post(`${API_URL}/auth`, { user, pass })\n      .then((res) => {\n        dispatch(loginSuccess(res.data, user));\n        const token = res.data.token;\n        axios.defaults.headers.common[\"Authorization\"] = token;\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        if (err.response.status === 401) {\n          dispatch(loginFailure(err));\n        }\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}